<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.8.1" />
<title>vectorbt.records.base API documentation</title>
<meta name="description" content="Main class for working with records â€¦" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.0-2/css/all.min.css" integrity="sha256-46r060N2LrChLLb5zowXQ72/iKKNiw/lAmygmHExk/o=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css" />
<link href='https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.0/normalize.min.css' rel='stylesheet'>
<link href='https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/8.0.0/sanitize.min.css' rel='stylesheet'>
<link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/atom-one-light.min.css" rel="stylesheet">
<style>.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}#sidebar>*:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #eee;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold;word-break:break-all}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{padding-bottom:.5em;border-bottom:1px solid #e82}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes+dl>dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}.name>span:first-child{white-space:nowrap}.name.class>span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary>*{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}.badge{display:inline-block;padding:0.25em 0.4em;font-size:75%;font-weight:700;line-height:1;text-align:center;white-space:nowrap;vertical-align:baseline;border-radius:0.25rem;transition:color 0.15s ease-in-out,background-color 0.15s ease-in-out,border-color 0.15s ease-in-out,box-shadow 0.15s ease-in-out}@media (prefers-reduced-motion:reduce){.badge{transition:none}}a.badge:hover,a.badge:focus{text-decoration:none}.badge:empty{display:none}.btn .badge{position:relative;top:-1px}.badge-pill{padding-right:0.6em;padding-left:0.6em;border-radius:10rem}.badge-primary{color:#fff;background-color:#007bff}a.badge-primary:hover,a.badge-primary:focus{color:#fff;background-color:#0062cc}a.badge-primary:focus,a.badge-primary.focus{outline:0;box-shadow:0 0 0 0.2rem rgba(0,123,255,0.5)}.badge-secondary{color:#fff;background-color:#6c757d}a.badge-secondary:hover,a.badge-secondary:focus{color:#fff;background-color:#545b62}a.badge-secondary:focus,a.badge-secondary.focus{outline:0;box-shadow:0 0 0 0.2rem rgba(108,117,125,0.5)}.badge-success{color:#fff;background-color:#28a745}a.badge-success:hover,a.badge-success:focus{color:#fff;background-color:#1e7e34}a.badge-success:focus,a.badge-success.focus{outline:0;box-shadow:0 0 0 0.2rem rgba(40,167,69,0.5)}.badge-info{color:#fff;background-color:#17a2b8}a.badge-info:hover,a.badge-info:focus{color:#fff;background-color:#117a8b}a.badge-info:focus,a.badge-info.focus{outline:0;box-shadow:0 0 0 0.2rem rgba(23,162,184,0.5)}.badge-warning{color:#212529;background-color:#ffc107}a.badge-warning:hover,a.badge-warning:focus{color:#212529;background-color:#d39e00}a.badge-warning:focus,a.badge-warning.focus{outline:0;box-shadow:0 0 0 0.2rem rgba(255,193,7,0.5)}.badge-danger{color:#fff;background-color:#dc3545}a.badge-danger:hover,a.badge-danger:focus{color:#fff;background-color:#bd2130}a.badge-danger:focus,a.badge-danger.focus{outline:0;box-shadow:0 0 0 0.2rem rgba(220,53,69,0.5)}.badge-light{color:#212529;background-color:#f8f9fa}a.badge-light:hover,a.badge-light:focus{color:#212529;background-color:#dae0e5}a.badge-light:focus,a.badge-light.focus{outline:0;box-shadow:0 0 0 0.2rem rgba(248,249,250,0.5)}.badge-dark{color:#fff;background-color:#343a40}a.badge-dark:hover,a.badge-dark:focus{color:#fff;background-color:#1d2124}a.badge-dark:focus,a.badge-dark.focus{outline:0;box-shadow:0 0 0 0.2rem rgba(52,58,64,0.5)}.search-container{width:100%;margin-top:15px;margin-bottom:15px}#search_input{display:inline-block;width:100%;height:40px;padding:.375rem .75rem;font-size:1rem;line-height:1.5;color:white;background:rgba(0,0,0,.2);border:none;border-bottom:1px solid #e82;outline:none}.algolia-autocomplete{width:100%;background:rgba(0,0,0,.2);border:none}.algolia-autocomplete input{display:none}.index-caption{color:white}#index a,#index h3,.toc a{color:white}#index a:hover,.toc a:hover{color:#e82}#sidebar{background:#3A4D6B}.toc ul ul,#index ul{padding-left:1.5em}.toc>ul>li{margin-top:.5em}pre{position:relative;background:#fafafa}pre .btnIcon{position:absolute;top:4px;z-index:2;cursor:pointer;border:1px solid transparent;padding:0;color:#383a42;background-color:transparent;height:30px;transition:all .25s ease-out}pre .btnIcon:hover{text-decoration:none}.btnIcon__body{align-items:center;display:flex}.btnIcon svg{fill:currentColor;margin-right:.4em}.btnIcon__label{font-size:11px}.btnClipboard{right:10px}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:400px;height:100vh;overflow:visible;position:sticky;top:0}#content{width:100%;max-width:100ch;padding:3em 4em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.scrollable-index{overflow-y:scroll;height:calc(100vh - 250px)}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script>
window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
ga('create', 'UA-142521178-3', 'auto'); ga('send', 'pageview');
</script><script async src='https://www.google-analytics.com/analytics.js'></script>
<style>.homelink{display:block;font-size:2em;font-weight:bold;color:white}.homelink:hover{color:#e82}.homelink img{max-width:128px;max-height:128px;margin:auto;margin-bottom:.3em}</style>
<link rel="icon" href="https://raw.githubusercontent.com/polakowo/vectorbt/master/favicon.ico">
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>vectorbt.records.base</code></h1>
</header>
<section id="section-intro">
<p>Main class for working with records.</p>
<p><code><a title="vectorbt" href="../index.html">vectorbt</a></code> works with two different representations of information: matrices and records.</p>
<p>A matrix, in this context, is just an array of one-dimensional arrays, each corresponding
to a separate feature. The matrix itself holds only one kind of information (one attribute).
For example, one can create a matrix for entry signals, with columns being different strategy
configurations. But what if the matrix is huge and sparse? Moreover, what if there is more
information we would like to represent by each element? Creating multiple matrices would be
a waste of memory.</p>
<p>Records make possible representing complex, sparse information in a dense format. They are just
an array of one-dimensional arrays of fixed schema. You can imagine records being a DataFrame,
where each row represents a record and each column represents a specific attribute.</p>
<pre><code class="plaintext">               a     b
         0   1.0   5.0
attr1 =  1   2.0   NaN
         2   NaN   7.0
         3   4.0   8.0
               a     b
         0   9.0  13.0
attr2 =  1  10.0   NaN
         2   NaN  15.0
         3  12.0  16.0
            |
            v
      col  idx  attr1  attr2
0       0    0      1      9
1       0    1      2     10
2       0    3      4     12
3       1    0      5     13
4       1    1      7     15
5       1    3      8     16
</code></pre>
<p>Another advantage of records is that multiple records can map to a single element in a matrix.
For example, one can define multiple orders at the same time step.</p>
<h2 id="schema">Schema</h2>
<p>Records must be created using <a href="https://numpy.org/doc/stable/user/basics.rec.html#record-arrays">numpy.recarray</a>
and have fields <code>idx</code> and <code>col</code> - they are needed to map record values back into a matrix form.</p>
<p>For example:</p>
<pre><code class="python-repl">&gt;&gt;&gt; import numpy as np
&gt;&gt;&gt; import pandas as pd
&gt;&gt;&gt; from numba import njit
&gt;&gt;&gt; from collections import namedtuple
&gt;&gt;&gt; from vectorbt.tseries.common import TSArrayWrapper
&gt;&gt;&gt; from vectorbt.records import Records

&gt;&gt;&gt; example_dt = np.dtype([
...     ('col', np.int64),
...     ('idx', np.int64),
...     ('some_field', np.float64)
... ])
&gt;&gt;&gt; records_arr = np.array([
...     (0, 0, 10.),
...     (0, 1, 11.),
...     (0, 2, 12.),
...     (1, 0, 13.),
...     (1, 1, 14.),
...     (1, 2, 15.)
... ], dtype=example_dt)
&gt;&gt;&gt; wrapper = TSArrayWrapper(index=['x', 'y', 'z'],
...     columns=['a', 'b'], ndim=2, freq='1 day')
&gt;&gt;&gt; records = Records(records_arr, wrapper)

&gt;&gt;&gt; print(records.records)
   col  idx  some_field
0    0    0        10.0
1    0    1        11.0
2    0    2        12.0
3    1    0        13.0
4    1    1        14.0
5    1    2        15.0
</code></pre>
<p>There are several options for converting record values into a matrix:</p>
<ul>
<li>Use <code><a title="vectorbt.records.base.Records.map_field_to_matrix" href="#vectorbt.records.base.Records.map_field_to_matrix">Records.map_field_to_matrix()</a></code> to map a record field.</li>
</ul>
<pre><code class="python-repl">&gt;&gt;&gt; print(records.map_field_to_matrix('some_field') ** 2)
       a      b
x  100.0  169.0
y  121.0  196.0
z  144.0  225.0
</code></pre>
<ul>
<li>Use <code><a title="vectorbt.records.base.Records.map_records_to_matrix" href="#vectorbt.records.base.Records.map_records_to_matrix">Records.map_records_to_matrix()</a></code> to map records using a custom function.</li>
</ul>
<pre><code class="python-repl">&gt;&gt;&gt; @njit
... def power_map_nb(record, pow):
...     return record.some_field ** pow

&gt;&gt;&gt; print(records.map_records_to_matrix(power_map_nb, 2))
       a      b
x  100.0  169.0
y  121.0  196.0
z  144.0  225.0
</code></pre>
<ul>
<li>Use <code><a title="vectorbt.records.base.Records.convert_array_to_matrix" href="#vectorbt.records.base.Records.convert_array_to_matrix">Records.convert_array_to_matrix()</a></code> to convert an array of already mapped values.</li>
</ul>
<pre><code class="python-repl">&gt;&gt;&gt; print(records.convert_array_to_matrix(records_arr['some_field'] ** 2))
       a      b
x  100.0  169.0
y  121.0  196.0
z  144.0  225.0
</code></pre>
<p>Furthermore, you can reduce by column as follows:</p>
<ul>
<li>Use <code><a title="vectorbt.records.base.Records.reduce_records" href="#vectorbt.records.base.Records.reduce_records">Records.reduce_records()</a></code> to reduce records:</li>
</ul>
<pre><code class="python-repl">&gt;&gt;&gt; @njit
... def pow_mean_reduce_nb(records, pow):
...     return np.mean(records.some_field ** pow)

&gt;&gt;&gt; print(records.reduce_records(pow_mean_reduce_nb, 2))
a    121.666667
b    196.666667
dtype: float64
</code></pre>
<ul>
<li>Use <code><a title="vectorbt.records.base.Records.map_reduce_records" href="#vectorbt.records.base.Records.map_reduce_records">Records.map_reduce_records()</a></code> to map and reduce records:</li>
</ul>
<pre><code class="python-repl">&gt;&gt;&gt; @njit
... def mean_reduce_nb(map_results, *args):
...     return np.mean(map_results)

&gt;&gt;&gt; print(records.map_reduce_records(power_map_nb, mean_reduce_nb, 2))
a    121.666667
b    196.666667
dtype: float64
</code></pre>
<ul>
<li>First map to a matrix and then reduce manually:</li>
</ul>
<pre><code class="python-repl">&gt;&gt;&gt; print(records.map_records_to_matrix(power_map_nb, 2).mean())
a    121.666667
b    196.666667
dtype: float64
</code></pre>
<h2 id="indexing">Indexing</h2>
<p>You can use pandas indexing on the <code><a title="vectorbt.records.base.Records" href="#vectorbt.records.base.Records">Records</a></code> class itself, which will forward indexing operation
to each <code>__init__</code> argument with index:</p>
<pre><code class="python-repl">&gt;&gt;&gt; print(records['a'].records)
   col  idx  some_field
0    0    0        10.0
1    0    1        11.0
2    0    2        12.0

&gt;&gt;&gt; print(records['a'].reduce_records(mean_reduce_nb, time_units=True))
11 days 00:00:00
</code></pre>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Changing index (time axis) is not supported.</p>
</div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">&#34;&#34;&#34;Main class for working with records.

`vectorbt` works with two different representations of information: matrices and records.

A matrix, in this context, is just an array of one-dimensional arrays, each corresponding
to a separate feature. The matrix itself holds only one kind of information (one attribute).
For example, one can create a matrix for entry signals, with columns being different strategy
configurations. But what if the matrix is huge and sparse? Moreover, what if there is more
information we would like to represent by each element? Creating multiple matrices would be
a waste of memory.

Records make possible representing complex, sparse information in a dense format. They are just
an array of one-dimensional arrays of fixed schema. You can imagine records being a DataFrame,
where each row represents a record and each column represents a specific attribute.

```plaintext
               a     b
         0   1.0   5.0
attr1 =  1   2.0   NaN
         2   NaN   7.0
         3   4.0   8.0
               a     b
         0   9.0  13.0
attr2 =  1  10.0   NaN
         2   NaN  15.0
         3  12.0  16.0
            |
            v
      col  idx  attr1  attr2
0       0    0      1      9
1       0    1      2     10
2       0    3      4     12
3       1    0      5     13
4       1    1      7     15
5       1    3      8     16
```

Another advantage of records is that multiple records can map to a single element in a matrix.
For example, one can define multiple orders at the same time step.

## Schema

Records must be created using [numpy.recarray](https://numpy.org/doc/stable/user/basics.rec.html#record-arrays)
and have fields `idx` and `col` - they are needed to map record values back into a matrix form.

For example:

```python-repl
&gt;&gt;&gt; import numpy as np
&gt;&gt;&gt; import pandas as pd
&gt;&gt;&gt; from numba import njit
&gt;&gt;&gt; from collections import namedtuple
&gt;&gt;&gt; from vectorbt.tseries.common import TSArrayWrapper
&gt;&gt;&gt; from vectorbt.records import Records

&gt;&gt;&gt; example_dt = np.dtype([
...     (&#39;col&#39;, np.int64),
...     (&#39;idx&#39;, np.int64),
...     (&#39;some_field&#39;, np.float64)
... ])
&gt;&gt;&gt; records_arr = np.array([
...     (0, 0, 10.),
...     (0, 1, 11.),
...     (0, 2, 12.),
...     (1, 0, 13.),
...     (1, 1, 14.),
...     (1, 2, 15.)
... ], dtype=example_dt)
&gt;&gt;&gt; wrapper = TSArrayWrapper(index=[&#39;x&#39;, &#39;y&#39;, &#39;z&#39;],
...     columns=[&#39;a&#39;, &#39;b&#39;], ndim=2, freq=&#39;1 day&#39;)
&gt;&gt;&gt; records = Records(records_arr, wrapper)

&gt;&gt;&gt; print(records.records)
   col  idx  some_field
0    0    0        10.0
1    0    1        11.0
2    0    2        12.0
3    1    0        13.0
4    1    1        14.0
5    1    2        15.0
```

There are several options for converting record values into a matrix:

* Use `Records.map_field_to_matrix` to map a record field.

```python-repl
&gt;&gt;&gt; print(records.map_field_to_matrix(&#39;some_field&#39;) ** 2)
       a      b
x  100.0  169.0
y  121.0  196.0
z  144.0  225.0
```

* Use `Records.map_records_to_matrix` to map records using a custom function.

```python-repl
&gt;&gt;&gt; @njit
... def power_map_nb(record, pow):
...     return record.some_field ** pow

&gt;&gt;&gt; print(records.map_records_to_matrix(power_map_nb, 2))
       a      b
x  100.0  169.0
y  121.0  196.0
z  144.0  225.0
```

* Use `Records.convert_array_to_matrix` to convert an array of already mapped values.

```python-repl
&gt;&gt;&gt; print(records.convert_array_to_matrix(records_arr[&#39;some_field&#39;] ** 2))
       a      b
x  100.0  169.0
y  121.0  196.0
z  144.0  225.0
```

Furthermore, you can reduce by column as follows:

* Use `Records.reduce_records` to reduce records:

```python-repl
&gt;&gt;&gt; @njit
... def pow_mean_reduce_nb(records, pow):
...     return np.mean(records.some_field ** pow)

&gt;&gt;&gt; print(records.reduce_records(pow_mean_reduce_nb, 2))
a    121.666667
b    196.666667
dtype: float64
```

* Use `Records.map_reduce_records` to map and reduce records:

```python-repl
&gt;&gt;&gt; @njit
... def mean_reduce_nb(map_results, *args):
...     return np.mean(map_results)

&gt;&gt;&gt; print(records.map_reduce_records(power_map_nb, mean_reduce_nb, 2))
a    121.666667
b    196.666667
dtype: float64
```

* First map to a matrix and then reduce manually:

```python-repl
&gt;&gt;&gt; print(records.map_records_to_matrix(power_map_nb, 2).mean())
a    121.666667
b    196.666667
dtype: float64
```

## Indexing

You can use pandas indexing on the `Records` class itself, which will forward indexing operation
to each `__init__` argument with index:

```python-repl
&gt;&gt;&gt; print(records[&#39;a&#39;].records)
   col  idx  some_field
0    0    0        10.0
1    0    1        11.0
2    0    2        12.0

&gt;&gt;&gt; print(records[&#39;a&#39;].reduce_records(mean_reduce_nb, time_units=True))
11 days 00:00:00
```

!!! note
    Changing index (time axis) is not supported.&#34;&#34;&#34;

import numpy as np
import pandas as pd

from vectorbt.utils import checks
from vectorbt.utils.decorators import cached_property, cached_method
from vectorbt.base.indexing import PandasIndexer
from vectorbt.tseries.common import TSArrayWrapper
from vectorbt.records.common import indexing_on_records
from vectorbt.records import nb


def _indexing_func(obj, pd_indexing_func):
    &#34;&#34;&#34;See `vectorbt.records.common.indexing_on_records`.&#34;&#34;&#34;
    return obj.__class__(*indexing_on_records(obj, pd_indexing_func))


class Records(PandasIndexer):
    &#34;&#34;&#34;Exposes methods and properties for working with records.

    Args:
        records_arr (np.ndarray): A structured NumPy array of records.

            Must have fields `idx` (index position in a matrix) and `col` (column position in a matrix).
        wrapper (TSArrayWrapper): Array wrapper of type `vectorbt.tseries.common.TSArrayWrapper`.&#34;&#34;&#34;

    def __init__(self, records_arr, wrapper):
        checks.assert_type(records_arr, np.ndarray)
        checks.assert_not_none(records_arr.dtype.fields)
        checks.assert_value_in(&#39;idx&#39;, records_arr.dtype.names)
        checks.assert_value_in(&#39;col&#39;, records_arr.dtype.names)
        checks.assert_type(wrapper, TSArrayWrapper)

        self.records_arr = records_arr
        self.wrapper = wrapper

        PandasIndexer.__init__(self, _indexing_func)

    @cached_property
    def records_col_index(self):
        &#34;&#34;&#34;Column index for `Records.records`.&#34;&#34;&#34;
        return nb.index_record_cols_nb(self.records_arr, len(self.wrapper.columns))

    @cached_property
    def records(self):
        &#34;&#34;&#34;Records.&#34;&#34;&#34;
        return pd.DataFrame.from_records(self.records_arr)

    def map_records_to_matrix(self, map_func_nb, *args, default_val=np.nan):
        &#34;&#34;&#34;Map each record to a value and store it in a matrix.

        See `vectorbt.records.nb.map_records_to_matrix_nb`.&#34;&#34;&#34;
        checks.assert_numba_func(map_func_nb)

        target_shape = (len(self.wrapper.index), len(self.wrapper.columns))
        return self.wrapper.wrap(nb.map_records_to_matrix_nb(
            self.records_arr, target_shape, default_val, map_func_nb, *args))

    def convert_array_to_matrix(self, a, default_val=np.nan):
        &#34;&#34;&#34;Convert a 1-dim array already mapped by the user.

        See `vectorbt.records.nb.convert_array_to_matrix`.

        The length of the array should match that of the records.&#34;&#34;&#34;
        checks.assert_type(a, np.ndarray)
        checks.assert_ndim(a, 1)
        checks.assert_same_shape(a, self.records_arr, axis=0)

        target_shape = (len(self.wrapper.index), len(self.wrapper.columns))
        result = nb.convert_array_to_matrix(a, self.records_arr, target_shape, default_val)
        return self.wrapper.wrap(result)

    @cached_method
    def map_field_to_matrix(self, field, default_val=np.nan):
        &#34;&#34;&#34;Map field to a matrix.&#34;&#34;&#34;
        return self.convert_array_to_matrix(self.records_arr[field], default_val=default_val)

    def reduce_records(self, reduce_func_nb, *args, default_val=np.nan, **kwargs):
        &#34;&#34;&#34;Reduce records by column.

        See `vectorbt.records.nb.reduce_records_nb`.

        `**kwargs` will be passed to `vectorbt.tseries.common.TSArrayWrapper.wrap_reduced`.&#34;&#34;&#34;
        checks.assert_numba_func(reduce_func_nb)

        return self.wrapper.wrap_reduced(nb.reduce_records_nb(
            self.records_arr, len(self.wrapper.columns), default_val, reduce_func_nb, *args), **kwargs)

    def map_reduce_records(self, map_func_nb, reduce_func_nb, *args, default_val=np.nan, **kwargs):
        &#34;&#34;&#34;Map each record to a value and reduce all values by column.

        See `vectorbt.records.nb.map_reduce_records_nb`.

        `**kwargs` will be passed to `vectorbt.tseries.common.TSArrayWrapper.wrap_reduced`.&#34;&#34;&#34;
        checks.assert_numba_func(reduce_func_nb)

        return self.wrapper.wrap_reduced(nb.map_reduce_records_nb(
            self.records_arr, len(self.wrapper.columns), default_val, map_func_nb, reduce_func_nb, *args), **kwargs)

    @cached_property
    def count(self):
        &#34;&#34;&#34;Number of records.&#34;&#34;&#34;
        return self.reduce_records(nb.count_reduce_nb, default_val=0.)

    @cached_property
    def recarray(self):
        return self.records_arr.view(np.recarray)</code></pre>
</details>
</section>
<section>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-classes">Classes</h2>
<dl>
<dt id="vectorbt.records.base.Records"><code class="flex name class">
<span>class <span class="ident parent-fname">Records</span></span>
<span>(</span><span>records_arr, wrapper)</span>
</code></dt>
<dd>
<div class="desc"><p>Exposes methods and properties for working with records.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>records_arr</code></strong> :&ensp;<code>np.ndarray</code></dt>
<dd>
<p>A structured NumPy array of records.</p>
<p>Must have fields <code>idx</code> (index position in a matrix) and <code>col</code> (column position in a matrix).</p>
</dd>
<dt><strong><code>wrapper</code></strong> :&ensp;<code>TSArrayWrapper</code></dt>
<dd>Array wrapper of type <code><a title="vectorbt.tseries.common.TSArrayWrapper" href="../tseries/common.html#vectorbt.tseries.common.TSArrayWrapper">TSArrayWrapper</a></code>.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class Records(PandasIndexer):
    &#34;&#34;&#34;Exposes methods and properties for working with records.

    Args:
        records_arr (np.ndarray): A structured NumPy array of records.

            Must have fields `idx` (index position in a matrix) and `col` (column position in a matrix).
        wrapper (TSArrayWrapper): Array wrapper of type `vectorbt.tseries.common.TSArrayWrapper`.&#34;&#34;&#34;

    def __init__(self, records_arr, wrapper):
        checks.assert_type(records_arr, np.ndarray)
        checks.assert_not_none(records_arr.dtype.fields)
        checks.assert_value_in(&#39;idx&#39;, records_arr.dtype.names)
        checks.assert_value_in(&#39;col&#39;, records_arr.dtype.names)
        checks.assert_type(wrapper, TSArrayWrapper)

        self.records_arr = records_arr
        self.wrapper = wrapper

        PandasIndexer.__init__(self, _indexing_func)

    @cached_property
    def records_col_index(self):
        &#34;&#34;&#34;Column index for `Records.records`.&#34;&#34;&#34;
        return nb.index_record_cols_nb(self.records_arr, len(self.wrapper.columns))

    @cached_property
    def records(self):
        &#34;&#34;&#34;Records.&#34;&#34;&#34;
        return pd.DataFrame.from_records(self.records_arr)

    def map_records_to_matrix(self, map_func_nb, *args, default_val=np.nan):
        &#34;&#34;&#34;Map each record to a value and store it in a matrix.

        See `vectorbt.records.nb.map_records_to_matrix_nb`.&#34;&#34;&#34;
        checks.assert_numba_func(map_func_nb)

        target_shape = (len(self.wrapper.index), len(self.wrapper.columns))
        return self.wrapper.wrap(nb.map_records_to_matrix_nb(
            self.records_arr, target_shape, default_val, map_func_nb, *args))

    def convert_array_to_matrix(self, a, default_val=np.nan):
        &#34;&#34;&#34;Convert a 1-dim array already mapped by the user.

        See `vectorbt.records.nb.convert_array_to_matrix`.

        The length of the array should match that of the records.&#34;&#34;&#34;
        checks.assert_type(a, np.ndarray)
        checks.assert_ndim(a, 1)
        checks.assert_same_shape(a, self.records_arr, axis=0)

        target_shape = (len(self.wrapper.index), len(self.wrapper.columns))
        result = nb.convert_array_to_matrix(a, self.records_arr, target_shape, default_val)
        return self.wrapper.wrap(result)

    @cached_method
    def map_field_to_matrix(self, field, default_val=np.nan):
        &#34;&#34;&#34;Map field to a matrix.&#34;&#34;&#34;
        return self.convert_array_to_matrix(self.records_arr[field], default_val=default_val)

    def reduce_records(self, reduce_func_nb, *args, default_val=np.nan, **kwargs):
        &#34;&#34;&#34;Reduce records by column.

        See `vectorbt.records.nb.reduce_records_nb`.

        `**kwargs` will be passed to `vectorbt.tseries.common.TSArrayWrapper.wrap_reduced`.&#34;&#34;&#34;
        checks.assert_numba_func(reduce_func_nb)

        return self.wrapper.wrap_reduced(nb.reduce_records_nb(
            self.records_arr, len(self.wrapper.columns), default_val, reduce_func_nb, *args), **kwargs)

    def map_reduce_records(self, map_func_nb, reduce_func_nb, *args, default_val=np.nan, **kwargs):
        &#34;&#34;&#34;Map each record to a value and reduce all values by column.

        See `vectorbt.records.nb.map_reduce_records_nb`.

        `**kwargs` will be passed to `vectorbt.tseries.common.TSArrayWrapper.wrap_reduced`.&#34;&#34;&#34;
        checks.assert_numba_func(reduce_func_nb)

        return self.wrapper.wrap_reduced(nb.map_reduce_records_nb(
            self.records_arr, len(self.wrapper.columns), default_val, map_func_nb, reduce_func_nb, *args), **kwargs)

    @cached_property
    def count(self):
        &#34;&#34;&#34;Number of records.&#34;&#34;&#34;
        return self.reduce_records(nb.count_reduce_nb, default_val=0.)

    @cached_property
    def recarray(self):
        return self.records_arr.view(np.recarray)</code></pre>
</details>
<h3 class="section-subtitle">Ancestors</h3>
<ul class="hlist">
<li><a title="vectorbt.base.indexing.PandasIndexer" href="../base/indexing.html#vectorbt.base.indexing.PandasIndexer">PandasIndexer</a></li>
</ul>
<h3 class="section-subtitle">Subclasses</h3>
<ul class="hlist">
<li><a title="vectorbt.records.drawdowns.BaseDrawdowns" href="drawdowns.html#vectorbt.records.drawdowns.BaseDrawdowns">BaseDrawdowns</a></li>
<li><a title="vectorbt.records.events.BaseEvents" href="events.html#vectorbt.records.events.BaseEvents">BaseEvents</a></li>
<li><a title="vectorbt.records.orders.BaseOrders" href="orders.html#vectorbt.records.orders.BaseOrders">BaseOrders</a></li>
</ul>
<h3 class="section-subtitle">Instance variables</h3>
<dl>
<dt id="vectorbt.records.base.Records.count"><code class="name">var <span class="ident fname">count</span></code></dt>
<dd>
<div class="desc"><p>Number of records.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def __get__(self, instance, owner=None):
    if instance is None:
        return self
    if not defaults.caching or self.disabled:  # you can manually disable cache here
        return super().__get__(instance, owner=owner)
    cache = instance.__dict__
    val = cache.get(self.attrname, _NOT_FOUND)
    if val is _NOT_FOUND:
        with self.lock:
            # check if another thread filled cache while we awaited lock
            val = cache.get(self.attrname, _NOT_FOUND)
            if val is _NOT_FOUND:
                val = self.func(instance)
                cache[self.attrname] = val
    return val</code></pre>
</details>
</dd>
<dt id="vectorbt.records.base.Records.recarray"><code class="name">var <span class="ident fname">recarray</span></code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def __get__(self, instance, owner=None):
    if instance is None:
        return self
    if not defaults.caching or self.disabled:  # you can manually disable cache here
        return super().__get__(instance, owner=owner)
    cache = instance.__dict__
    val = cache.get(self.attrname, _NOT_FOUND)
    if val is _NOT_FOUND:
        with self.lock:
            # check if another thread filled cache while we awaited lock
            val = cache.get(self.attrname, _NOT_FOUND)
            if val is _NOT_FOUND:
                val = self.func(instance)
                cache[self.attrname] = val
    return val</code></pre>
</details>
</dd>
<dt id="vectorbt.records.base.Records.records"><code class="name">var <span class="ident fname">records</span></code></dt>
<dd>
<div class="desc"><p>Records.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def __get__(self, instance, owner=None):
    if instance is None:
        return self
    if not defaults.caching or self.disabled:  # you can manually disable cache here
        return super().__get__(instance, owner=owner)
    cache = instance.__dict__
    val = cache.get(self.attrname, _NOT_FOUND)
    if val is _NOT_FOUND:
        with self.lock:
            # check if another thread filled cache while we awaited lock
            val = cache.get(self.attrname, _NOT_FOUND)
            if val is _NOT_FOUND:
                val = self.func(instance)
                cache[self.attrname] = val
    return val</code></pre>
</details>
</dd>
<dt id="vectorbt.records.base.Records.records_col_index"><code class="name">var <span class="ident fname">records_col_index</span></code></dt>
<dd>
<div class="desc"><p>Column index for <code><a title="vectorbt.records.base.Records.records" href="#vectorbt.records.base.Records.records">Records.records</a></code>.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def __get__(self, instance, owner=None):
    if instance is None:
        return self
    if not defaults.caching or self.disabled:  # you can manually disable cache here
        return super().__get__(instance, owner=owner)
    cache = instance.__dict__
    val = cache.get(self.attrname, _NOT_FOUND)
    if val is _NOT_FOUND:
        with self.lock:
            # check if another thread filled cache while we awaited lock
            val = cache.get(self.attrname, _NOT_FOUND)
            if val is _NOT_FOUND:
                val = self.func(instance)
                cache[self.attrname] = val
    return val</code></pre>
</details>
</dd>
</dl>
<h3 class="section-subtitle">Methods</h3>
<dl>
<dt id="vectorbt.records.base.Records.convert_array_to_matrix"><code class="name flex">
<span>def <span class="ident fname">convert_array_to_matrix</span></span>(<span>self, a, default_val=nan)</span>
</code></dt>
<dd>
<div class="desc"><p>Convert a 1-dim array already mapped by the user.</p>
<p>See <code><a title="vectorbt.records.nb.convert_array_to_matrix" href="nb.html#vectorbt.records.nb.convert_array_to_matrix">convert_array_to_matrix()</a></code>.</p>
<p>The length of the array should match that of the records.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def convert_array_to_matrix(self, a, default_val=np.nan):
    &#34;&#34;&#34;Convert a 1-dim array already mapped by the user.

    See `vectorbt.records.nb.convert_array_to_matrix`.

    The length of the array should match that of the records.&#34;&#34;&#34;
    checks.assert_type(a, np.ndarray)
    checks.assert_ndim(a, 1)
    checks.assert_same_shape(a, self.records_arr, axis=0)

    target_shape = (len(self.wrapper.index), len(self.wrapper.columns))
    result = nb.convert_array_to_matrix(a, self.records_arr, target_shape, default_val)
    return self.wrapper.wrap(result)</code></pre>
</details>
</dd>
<dt id="vectorbt.records.base.Records.map_field_to_matrix"><code class="name flex">
<span>def <span class="ident fname">map_field_to_matrix</span></span>(<span>self, field, default_val=nan)</span>
</code></dt>
<dd>
<div class="desc"><p>Map field to a matrix.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@cached_method
def map_field_to_matrix(self, field, default_val=np.nan):
    &#34;&#34;&#34;Map field to a matrix.&#34;&#34;&#34;
    return self.convert_array_to_matrix(self.records_arr[field], default_val=default_val)</code></pre>
</details>
</dd>
<dt id="vectorbt.records.base.Records.map_records_to_matrix"><code class="name flex">
<span>def <span class="ident fname">map_records_to_matrix</span></span>(<span>self, map_func_nb, *args, default_val=nan)</span>
</code></dt>
<dd>
<div class="desc"><p>Map each record to a value and store it in a matrix.</p>
<p>See <code><a title="vectorbt.records.nb.map_records_to_matrix_nb" href="nb.html#vectorbt.records.nb.map_records_to_matrix_nb">map_records_to_matrix_nb()</a></code>.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def map_records_to_matrix(self, map_func_nb, *args, default_val=np.nan):
    &#34;&#34;&#34;Map each record to a value and store it in a matrix.

    See `vectorbt.records.nb.map_records_to_matrix_nb`.&#34;&#34;&#34;
    checks.assert_numba_func(map_func_nb)

    target_shape = (len(self.wrapper.index), len(self.wrapper.columns))
    return self.wrapper.wrap(nb.map_records_to_matrix_nb(
        self.records_arr, target_shape, default_val, map_func_nb, *args))</code></pre>
</details>
</dd>
<dt id="vectorbt.records.base.Records.map_reduce_records"><code class="name flex">
<span>def <span class="ident fname">map_reduce_records</span></span>(<span>self, map_func_nb, reduce_func_nb, *args, default_val=nan, **kwargs)</span>
</code></dt>
<dd>
<div class="desc"><p>Map each record to a value and reduce all values by column.</p>
<p>See <code><a title="vectorbt.records.nb.map_reduce_records_nb" href="nb.html#vectorbt.records.nb.map_reduce_records_nb">map_reduce_records_nb()</a></code>.</p>
<p><code>**kwargs</code> will be passed to <code><a title="vectorbt.tseries.common.TSArrayWrapper.wrap_reduced" href="../tseries/common.html#vectorbt.tseries.common.TSArrayWrapper.wrap_reduced">TSArrayWrapper.wrap_reduced()</a></code>.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def map_reduce_records(self, map_func_nb, reduce_func_nb, *args, default_val=np.nan, **kwargs):
    &#34;&#34;&#34;Map each record to a value and reduce all values by column.

    See `vectorbt.records.nb.map_reduce_records_nb`.

    `**kwargs` will be passed to `vectorbt.tseries.common.TSArrayWrapper.wrap_reduced`.&#34;&#34;&#34;
    checks.assert_numba_func(reduce_func_nb)

    return self.wrapper.wrap_reduced(nb.map_reduce_records_nb(
        self.records_arr, len(self.wrapper.columns), default_val, map_func_nb, reduce_func_nb, *args), **kwargs)</code></pre>
</details>
</dd>
<dt id="vectorbt.records.base.Records.reduce_records"><code class="name flex">
<span>def <span class="ident fname">reduce_records</span></span>(<span>self, reduce_func_nb, *args, default_val=nan, **kwargs)</span>
</code></dt>
<dd>
<div class="desc"><p>Reduce records by column.</p>
<p>See <code><a title="vectorbt.records.nb.reduce_records_nb" href="nb.html#vectorbt.records.nb.reduce_records_nb">reduce_records_nb()</a></code>.</p>
<p><code>**kwargs</code> will be passed to <code><a title="vectorbt.tseries.common.TSArrayWrapper.wrap_reduced" href="../tseries/common.html#vectorbt.tseries.common.TSArrayWrapper.wrap_reduced">TSArrayWrapper.wrap_reduced()</a></code>.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def reduce_records(self, reduce_func_nb, *args, default_val=np.nan, **kwargs):
    &#34;&#34;&#34;Reduce records by column.

    See `vectorbt.records.nb.reduce_records_nb`.

    `**kwargs` will be passed to `vectorbt.tseries.common.TSArrayWrapper.wrap_reduced`.&#34;&#34;&#34;
    checks.assert_numba_func(reduce_func_nb)

    return self.wrapper.wrap_reduced(nb.reduce_records_nb(
        self.records_arr, len(self.wrapper.columns), default_val, reduce_func_nb, *args), **kwargs)</code></pre>
</details>
</dd>
</dl>
<h3 class="section-subtitle">Inherited members</h3>
<ul class="hlist">
<li><code><b><a title="vectorbt.base.indexing.PandasIndexer" href="../base/indexing.html#vectorbt.base.indexing.PandasIndexer">PandasIndexer</a></b></code>:
<ul class="hlist">
<li><code><a title="vectorbt.base.indexing.PandasIndexer.iloc" href="../base/indexing.html#vectorbt.base.indexing.PandasIndexer.iloc">iloc</a></code></li>
<li><code><a title="vectorbt.base.indexing.PandasIndexer.loc" href="../base/indexing.html#vectorbt.base.indexing.PandasIndexer.loc">loc</a></code></li>
<li><code><a title="vectorbt.base.indexing.PandasIndexer.xs" href="../base/indexing.html#vectorbt.base.indexing.PandasIndexer.xs">xs</a></code></li>
</ul>
</li>
</ul>
</dd>
</dl>
</section>
</article>
<nav id="sidebar">
<header>
<a class="homelink" rel="home" title="pdoc Home" href="https://github.com/polakowo/vectorbt">
<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAIAAABMXPacAAAACXBIWXMAACcQAAAnEAGUaVEZAAAGuGlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDggNzkuMTY0MDM2LCAyMDE5LzA4LzEzLTAxOjA2OjU3ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgMjEuMCAoTWFjaW50b3NoKSIgeG1wOkNyZWF0ZURhdGU9IjIwMjAtMDYtMjVUMjM6MzU6MTMrMDI6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMjAtMDYtMjZUMTQ6MTA6MzgrMDI6MDAiIHhtcDpNb2RpZnlEYXRlPSIyMDIwLTA2LTI2VDE0OjEwOjM4KzAyOjAwIiBkYzpmb3JtYXQ9ImltYWdlL3BuZyIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDowNzE0MGFiYi05Mjk1LTQ3MDYtYTNhZi1lMDg2OTFkOTk3NjQiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NzZmN2Y4NjAtMThmMi00ZDgxLTg5NjUtNDU5ZjY1NDY2ZGZlIiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6NzZmN2Y4NjAtMThmMi00ZDgxLTg5NjUtNDU5ZjY1NDY2ZGZlIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiBwaG90b3Nob3A6SUNDUHJvZmlsZT0ic1JHQiBJRUM2MTk2Ni0yLjEiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjc2ZjdmODYwLTE4ZjItNGQ4MS04OTY1LTQ1OWY2NTQ2NmRmZSIgc3RFdnQ6d2hlbj0iMjAyMC0wNi0yNVQyMzozNToxMyswMjowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIDIxLjAgKE1hY2ludG9zaCkiLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjQ2NjI2MGIzLTY0ZmUtNGJiYy1iMTNiLWZkMDU3NDI3NjIyNCIgc3RFdnQ6d2hlbj0iMjAyMC0wNi0yNlQxMzoyMTo1NSswMjowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIDIxLjAgKE1hY2ludG9zaCkiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjA3MTQwYWJiLTkyOTUtNDcwNi1hM2FmLWUwODY5MWQ5OTc2NCIgc3RFdnQ6d2hlbj0iMjAyMC0wNi0yNlQxNDoxMDozOCswMjowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIDIxLjAgKE1hY2ludG9zaCkiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+Qc/+aQAAAa5JREFUeJzt3cFJA0EYgFEjgj3FGmIjsQexByuxB4vy5kHwELJhCRPekP3eMYdl4Ms/y84Gstsfjg9xHvUCtq4AWAGwAmAFwAqAFQArAFYArABYAbACYAXACoAVACsAVgCsAFgBsAJgBcAKgBUAexp1oe+vz7Ofv7y+dZ0LmgCsAFgBsAJgBcAKgBUAKwBWAKwAWAGwAmAFwAqAFQAb9j5glFHn7KPcej1NAFYAzG9BP+/n3/ld9vwx1051tSYA8xPwZ/03+rqJmVYTgBUAm2UL+re0w6i7br8LunMFwAqAFQArAFYArADYdM8Bd3PKtlITgBUAm2ULurMzzvWaAMxPwNbuuieaAKwAmN+CTtz6/H02TQBWAKwAWAGwAmAFwAqAFQArAFYArABYAbACYAXACoANex8w23n9bOtZ0gRgBcAKgBUAKwBWAKwA2HT/HzDKbOtZ0gRgBcAKgBUAKwBWAKwAWAGwAmAFwAqAFQArAFYArADYbn846jVsWhOAFQArAFYArABYAbACYAXACoAVACsAVgCsAFgBsAJgBcAKgBUAKwBWAKwAWAGwAmC/7uUrwcQVST8AAAAASUVORK5CYII="/>
vectorbt</a>
</header>
<div class="search-container">
<input
id="search_input"
type="text"
placeholder="Search"
title="Search"
/>
</div>
<div class="scrollable-index">
<h1 class="index-caption">Index</h1>
<div class="toc">
<ul>
<li><a href="#schema">Schema</a></li>
<li><a href="#indexing">Indexing</a></li>
</ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="vectorbt.records" href="index.html">vectorbt.records</a></code></li>
</ul>
</li>
<li><h3><a href="#header-classes">Classes</a></h3>
<ul>
<li>
<h4><code><a title="vectorbt.records.base.Records" href="#vectorbt.records.base.Records">Records</a></code></h4>
<ul class="">
<li><code><a title="vectorbt.records.base.Records.convert_array_to_matrix" href="#vectorbt.records.base.Records.convert_array_to_matrix">convert_array_to_matrix</a></code></li>
<li><code><a title="vectorbt.records.base.Records.count" href="#vectorbt.records.base.Records.count">count</a></code></li>
<li><code><a title="vectorbt.records.base.Records.map_field_to_matrix" href="#vectorbt.records.base.Records.map_field_to_matrix">map_field_to_matrix</a></code></li>
<li><code><a title="vectorbt.records.base.Records.map_records_to_matrix" href="#vectorbt.records.base.Records.map_records_to_matrix">map_records_to_matrix</a></code></li>
<li><code><a title="vectorbt.records.base.Records.map_reduce_records" href="#vectorbt.records.base.Records.map_reduce_records">map_reduce_records</a></code></li>
<li><code><a title="vectorbt.records.base.Records.recarray" href="#vectorbt.records.base.Records.recarray">recarray</a></code></li>
<li><code><a title="vectorbt.records.base.Records.records" href="#vectorbt.records.base.Records.records">records</a></code></li>
<li><code><a title="vectorbt.records.base.Records.records_col_index" href="#vectorbt.records.base.Records.records_col_index">records_col_index</a></code></li>
<li><code><a title="vectorbt.records.base.Records.reduce_records" href="#vectorbt.records.base.Records.reduce_records">reduce_records</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</nav>
</main>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.0.0/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad()</script>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
<script type="text/javascript">
docsearch({
apiKey: 'ac97cfdd96a6e6fcdc67c570adaeaf94',
indexName: 'vectorbt',
inputSelector: '#search_input',
autocompleteOptions: {
autoWidth: false
},
debug: true // Set debug to true if you want to inspect the dropdown
});
</script>
<script src="https://buttons.github.io/buttons.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script>
<script>
// Turn off ESLint for this file because it's sent down to users as-is.
/* eslint-disable */
window.addEventListener('load', function() {
function button(label, ariaLabel, icon, className) {
const btn = document.createElement('button');
btn.classList.add('btnIcon', className);
btn.setAttribute('type', 'button');
btn.setAttribute('aria-label', ariaLabel);
btn.innerHTML =
'<div class="btnIcon__body">' +
icon +
'<strong class="btnIcon__label">' +
label +
'</strong>' +
'</div>';
return btn;
}
function addButtons(codeBlockSelector, btn) {
document.querySelectorAll(codeBlockSelector).forEach(function(code) {
code.parentNode.appendChild(btn.cloneNode(true));
});
}
const copyIcon =
'<svg width="12" height="12" viewBox="340 364 14 15" xmlns="http://www.w3.org/2000/svg"><path fill="currentColor" d="M342 375.974h4v.998h-4v-.998zm5-5.987h-5v.998h5v-.998zm2 2.994v-1.995l-3 2.993 3 2.994v-1.996h5v-1.995h-5zm-4.5-.997H342v.998h2.5v-.997zm-2.5 2.993h2.5v-.998H342v.998zm9 .998h1v1.996c-.016.28-.11.514-.297.702-.187.187-.422.28-.703.296h-10c-.547 0-1-.452-1-.998v-10.976c0-.546.453-.998 1-.998h3c0-1.107.89-1.996 2-1.996 1.11 0 2 .89 2 1.996h3c.547 0 1 .452 1 .998v4.99h-1v-2.995h-10v8.98h10v-1.996zm-9-7.983h8c0-.544-.453-.996-1-.996h-1c-.547 0-1-.453-1-.998 0-.546-.453-.998-1-.998-.547 0-1 .452-1 .998 0 .545-.453.998-1 .998h-1c-.547 0-1 .452-1 .997z" fill-rule="evenodd"/></svg>';
addButtons(
'.hljs',
button('Copy', 'Copy code to clipboard', copyIcon, 'btnClipboard'),
);
const clipboard = new ClipboardJS('.btnClipboard', {
target: function(trigger) {
return trigger.parentNode.querySelector('code');
},
});
clipboard.on('success', function(event) {
event.clearSelection();
const textEl = event.trigger.querySelector('.btnIcon__label');
textEl.textContent = 'Copied';
setTimeout(function() {
textEl.textContent = 'Copy';
}, 2000);
});
});
</script>
</body>
</html>